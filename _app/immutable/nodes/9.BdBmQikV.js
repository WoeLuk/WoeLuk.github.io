import{t as x,a as g,c as O}from"../chunks/jk-KqXiE.js";import{an as Z,O as tt,b as et,i as rt,E as R,I as y,J as E,M as W,F as m,G as v,H as j,g as n,K as $,v as N,a as at,w}from"../chunks/DkwZ7NE_.js";import{d as A,s as I}from"../chunks/DqfCd0HL.js";import{s as S,a as T,i as M}from"../chunks/CgyMSjB3.js";import{d as st,s as ot,$ as V,e as B,i as P,w as lt}from"../chunks/Cu2f1RHe.js";import{o as nt}from"../chunks/CneGok6B.js";import{g as it}from"../chunks/DN_5PDab.js";import{l as ct}from"../chunks/DlKu_-6a.js";import{p as vt}from"../chunks/neVDGEr_.js";function ut(t,e,i=e){var h=Z();ct(t,"input",c=>{var r=c?t.defaultValue:t.value;if(r=J(t)?K(r):r,i(r),h&&r!==(r=e())){var o=t.selectionStart,d=t.selectionEnd;t.value=r??"",d!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(d,t.value.length))}}),(tt&&t.defaultValue!==t.value||et(e)==null&&t.value)&&i(J(t)?K(t.value):t.value),rt(()=>{var c=e();J(t)&&c===K(t.value)||t.type==="date"&&!c&&!t.value||c!==t.value&&(t.value=c??"")})}function J(t){var e=t.type;return e==="number"||e==="range"}function K(t){return t===""?null:+t}var dt=x('<input type="text" class="w-full p-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">');function ft(t,e){R(e,!0);const[i,h]=T(),c=()=>S(V,"$t",i);let r=vt(e,"search",15);var o=dt();st(o),y(d=>ot(o,"placeholder",d),[()=>c()("search_text")]),ut(o,r),g(t,o),E(),h()}var gt=(t,e,i)=>e(n(i).driverId),mt=x('<li><button class="w-full text-left cursor-pointer px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-blue-200 dark:hover:bg-blue-600 text-black dark:text-white"> </button></li>'),_t=x('<div><h2 class="text-lg font-semibold mb-2 text-black dark:text-white"> </h2> <ul class="space-y-2"></ul></div>');function bt(t,e){R(e,!0);const[i,h]=T(),c=()=>S(V,"$t",i);function r(l){it(`/driver?driverId=${l}`)}var o=O(),d=W(o);{var p=l=>{var _=_t(),b=m(_),D=m(b,!0);v(b);var k=j(b,2);B(k,21,()=>e.drivers,P,(a,s)=>{var u=mt(),f=m(u);f.__click=[gt,r,s];var C=m(f);v(f),v(u),y(()=>I(C,`${n(s).givenName??""} ${n(s).familyName??""}`)),g(a,u)}),v(k),v(_),y(a=>I(D,a),[()=>c()("drivers")]),g(l,_)};M(d,l=>{e.drivers.length>0&&l(p)})}g(t,o),E(),h()}A(["click"]);var ht=(t,e,i)=>e(n(i).url),xt=x('<li><button class="w-full text-left cursor-pointer px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-green-200 dark:hover:bg-green-600 text-black dark:text-white"> </button></li>'),pt=x('<div><h2 class="text-lg font-semibold mb-2 text-black dark:text-white"> </h2> <ul class="space-y-2"></ul></div>');function kt(t,e){R(e,!0);const[i,h]=T(),c=()=>S(V,"$t",i);function r(l){window.open(l,"_blank")}var o=O(),d=W(o);{var p=l=>{var _=pt(),b=m(_),D=m(b,!0);v(b);var k=j(b,2);B(k,21,()=>e.constructors,P,(a,s)=>{var u=xt(),f=m(u);f.__click=[ht,r,s];var C=m(f,!0);v(f),v(u),y(()=>I(C,n(s).name)),g(a,u)}),v(k),v(_),y(a=>I(D,a),[()=>c()("teams")]),g(l,_)};M(d,l=>{e.constructors.length>0&&l(p)})}g(t,o),E(),h()}A(["click"]);var $t=x('<p class="text-sm text-gray-500 dark:text-gray-400"> </p>'),wt=x('<div class="mt-6 space-y-6"><!> <!> <!></div>'),yt=x('<div class="max-w-xl mx-auto mt-16 px-4"><!> <!></div>');function St(t,e){R(e,!0);const[i,h]=T(),c=()=>S(V,"$t",i);let r=$(""),o=$(N([])),d=$(N([])),p=$(N([])),l=$(N([])),_=$(!0);nt(async()=>{await lt(),w(_,!1);const a=await fetch("https://api.jolpi.ca/ergast/f1/current/drivers.json"),s=await fetch("https://api.jolpi.ca/ergast/f1/current/constructors.json"),u=await a.json(),f=await s.json();w(o,u.MRData.DriverTable.Drivers,!0),w(d,f.MRData.ConstructorTable.Constructors,!0)}),at(()=>{const a=n(r).trim().toLowerCase();w(p,a?n(o).filter(s=>`${s.givenName} ${s.familyName}`.toLowerCase().includes(a)):[],!0),w(l,a?n(d).filter(s=>s.name.toLowerCase().includes(a)):[],!0)});var b=O(),D=W(b);{var k=a=>{var s=yt(),u=m(s);ft(u,{get search(){return n(r)},set search(L){w(r,L,!0)}});var f=j(u,2);{var C=L=>{var F=wt(),q=m(F);bt(q,{get drivers(){return n(p)}});var z=j(q,2);kt(z,{get constructors(){return n(l)}});var Q=j(z,2);{var U=G=>{var H=$t(),X=m(H,!0);v(H),y(Y=>I(X,Y),[()=>c()("no_results")]),g(G,H)};M(Q,G=>{n(p).length===0&&n(l).length===0&&G(U)})}v(F),g(L,F)};M(f,L=>{n(r).trim().length>0&&L(C)})}v(s),g(a,s)};M(D,a=>{n(_)||a(k)})}g(t,b),E(),h()}export{St as component};
