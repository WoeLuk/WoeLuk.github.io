import{t as j,a as N,s as w,d as Z,c as $}from"../chunks/Dxuy1mk5.js";import{e as J,a9 as tt,E as B,H as n,b as C,aa as et,I as i,K as L,M as O,J as k,N as M,c as z,G as at,O as H,f as P}from"../chunks/D9So642S.js";import{i as K,a as T,s as E}from"../chunks/BTZNSVys.js";import{s as R,$ as U,e as Q,i as V,w as rt}from"../chunks/Bnh7NVQW.js";import{s as it}from"../chunks/rZxoGIVg.js";import"../chunks/B3hE-Vfr.js";import{l as nt}from"../chunks/BsW4FbBd.js";import{p as st}from"../chunks/BUpMsk2X.js";function W(t,e,s){if(t.multiple)return ut(t,e);for(var c of t.options){var o=q(c);if(tt(o,e)){c.selected=!0;return}}(!s||e!==void 0)&&(t.selectedIndex=-1)}function ot(t,e){J(()=>{var s=new MutationObserver(()=>{var c=t.__value;W(t,c)});return s.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function ct(t,e,s=e){var c=!0;nt(t,"change",o=>{var m=o?"[selected]":":checked",d;if(t.multiple)d=[].map.call(t.querySelectorAll(m),q);else{var g=t.querySelector(m)??t.querySelector("option:not([disabled])");d=g&&q(g)}s(d)}),J(()=>{var o=e();if(W(t,o,c),c&&o===void 0){var m=t.querySelector(":checked");m!==null&&(o=q(m),s(o))}t.__value=o,c=!1}),ot(t)}function ut(t,e){for(var s of t.options)s.selected=~e.indexOf(q(s))}function q(t){return"__value"in t?t.__value:t.value}var lt=j('<a><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-green-600 dark:text-green-400 mt-2 font-semibold"> </p></div></a>'),dt=j('<div><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-red-600 dark:text-light-red-550 mt-2 font-semibold"> </p></div></div>'),vt=j("<div><!></div>");function gt(t,e){B(e,!0);const[s,c]=T(),o=()=>E(U,"$t",s),m=d(new Date);function d(a){const r=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),v=String(a.getDate()).padStart(2,"0");return`${r}-${l}-${v}`}function g(a,r=navigator.language){const l=new Date(a);return new Intl.DateTimeFormat(r,{day:"2-digit",month:"2-digit",year:"numeric"}).format(l)}const D=et(()=>e.race.date>m);function p(a){let r=a.raceName.replace(/Grand Prix/i,"").trim();return a.raceName.includes("British Grand Prix")?"Great_Britain_Circuit":a.Circuit.Location.country==="Azerbaijan"?"Baku_Circuit":a.Circuit.Location.country==="Italy"&&!a.raceName.includes("Emilia Romagna")?"Italy_Circuit":a.raceName.includes("United States Grand Prix")?"USA_Circuit":a.raceName.includes("Abu Dhabi Grand Prix")?"Abu_Dhabi_Circuit":(e.races.filter(v=>v.Circuit.Location.country===a.Circuit.Location.country).length===1&&(r=a.Circuit.Location.country),r=r.replace(/\s+/g,"_").replace(/[^\w_]/g,""),r+"_Circuit")}var u=vt(),f=n(u);{var y=a=>{var r=lt(),l=n(r),v=k(l,2),_=n(v),I=n(_,!0);i(_);var b=k(_,2),x=n(b,!0);i(b);var S=k(b,2),A=n(S,!0);i(S),i(v),i(r),L((F,G,Y,X)=>{R(r,"href",`race?year=${F??""}&round=${e.race.round??""}`),R(l,"src",G),R(l,"alt",e.race.raceName),w(I,e.race.raceName),w(x,Y),w(A,X)},[()=>new Date(e.race.date).getFullYear(),()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${p(e.race)}.jpg`,()=>g(e.race.date),()=>o()("see_results")]),N(a,r)},h=a=>{var r=dt(),l=n(r),v=k(l,2),_=n(v),I=n(_,!0);i(_);var b=k(_,2),x=n(b,!0);i(b);var S=k(b,2),A=n(S,!0);i(S),i(v),i(r),L((F,G,Y)=>{R(l,"src",F),R(l,"alt",e.race.raceName),w(I,e.race.raceName),w(x,G),w(A,Y)},[()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${p(e.race)}.jpg`,()=>new Date(e.race.date).toLocaleDateString("de-AT"),()=>o()("results_not_available")]),N(a,r)};K(f,a=>{C(D)?a(h,!1):a(y)})}i(u),L(()=>it(u,1,`rounded-xl overflow-hidden shadow transition font-titillium
  ${C(D)?"opacity-50":"cursor-pointer hover:shadow-lg"}`)),N(t,u),O(),c()}var ft=j("<option> </option>"),mt=j('<div class="flex items-center gap-2 text-black dark:text-white pt-5 pb-5"><span> </span> <select class="p-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div>');function _t(t,e){B(e,!0);const[s,c]=T(),o=()=>E(U,"$t",s);let m=st(e,"season",15);var d=mt(),g=n(d),D=n(g,!0);i(g);var p=k(g,2);p.__change=function(...u){var f;(f=e.loadRaces)==null||f.apply(this,u)},Q(p,20,()=>Array(10).fill(0).map((u,f)=>e.currentYear-f),V,(u,f)=>{var y=ft(),h={},a=n(y,!0);i(y),L(()=>{h!==(h=f)&&(y.value=(y.__value=f)??""),w(a,f)}),N(u,y)}),i(p),i(d),L(u=>w(D,u),[()=>o()("select_season")]),ct(p,m),N(t,d),O(),c()}Z(["change"]);var pt=j('<title> </title> <div class="min-h-screen bg-gray-50 dark:bg-gray-950 transition-colors"><div class="flex justify-center font-titillium"><!></div> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-5"></div></div>',1);function St(t,e){B(e,!0);const[s,c]=T(),o=()=>E(U,"$t",s),m=new Date().getFullYear();let d=M(z(new Date().getFullYear())),g=M(z([])),D=M(!0);async function p(){const a=await(await fetch(`https://api.jolpi.ca/ergast/f1/${C(d)}/races/`)).json();P(g,a.MRData.RaceTable.Races,!0)}at(async()=>{await rt(),P(D,!1),p()});var u=$(),f=H(u);{var y=h=>{var a=pt(),r=H(a),l=n(r,!0);i(r);var v=k(r,2),_=n(v),I=n(_);_t(I,{loadRaces:p,currentYear:m,get season(){return C(d)},set season(x){P(d,x,!0)}}),i(_);var b=k(_,2);Q(b,21,()=>C(g),V,(x,S)=>{gt(x,{get race(){return C(S)},get races(){return C(g)}})}),i(b),i(v),L(x=>w(l,x),[()=>o()("races_overview")]),N(h,a)};K(f,h=>{C(D)||h(y)})}N(t,u),O(),c()}export{St as component};
