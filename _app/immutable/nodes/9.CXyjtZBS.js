import{t as A,a as j,c as K}from"../chunks/95_l2rzH.js";import{h as V,a5 as $,p as U,t as n,g as S,a6 as tt,v as r,w as q,m as z,o as h,s as P,k as Q,l as B,n as T}from"../chunks/Cau8z7w8.js";import{s as w,d as et}from"../chunks/Cv_SUIVi.js";import{i as O,s as E,a as H}from"../chunks/Df8EspDC.js";import{s as Y,$ as J,e as W,i as X,w as at}from"../chunks/D2-4r9CG.js";import{o as rt}from"../chunks/B9GAXeb5.js";import{s as it}from"../chunks/C_yyQNa1.js";import"../chunks/BUmN8u0I.js";import{l as nt}from"../chunks/D_aa4XAj.js";import{p as ot}from"../chunks/CmjAMb9Q.js";function Z(t,e,s){if(t.multiple)return lt(t,e);for(var c of t.options){var o=G(c);if($(o,e)){c.selected=!0;return}}(!s||e!==void 0)&&(t.selectedIndex=-1)}function st(t,e){V(()=>{var s=new MutationObserver(()=>{var c=t.__value;Z(t,c)});return s.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function ct(t,e,s=e){var c=!0;nt(t,"change",o=>{var p=o?"[selected]":":checked",f;if(t.multiple)f=[].map.call(t.querySelectorAll(p),G);else{var g=t.querySelector(p)??t.querySelector("option:not([disabled])");f=g&&G(g)}s(f)}),V(()=>{var o=e();if(Z(t,o,c),c&&o===void 0){var p=t.querySelector(":checked");p!==null&&(o=G(p),s(o))}t.__value=o,c=!1}),st(t)}function lt(t,e){for(var s of t.options)s.selected=~e.indexOf(G(s))}function G(t){return"__value"in t?t.__value:t.value}var ut=A('<a><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-green-600 dark:text-green-400 mt-2 font-semibold"> </p></div></a>'),dt=A('<div><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-red-600 dark:text-light-red-550 mt-2 font-semibold"> </p></div></div>'),vt=A("<div><!></div>");function ft(t,e){U(e,!0);const[s,c]=E(),o=()=>H(J,"$t",s),p=f(new Date);function f(a){const i=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),_=String(a.getDate()).padStart(2,"0");return`${i}-${u}-${_}`}function g(a,i=navigator.language){const u=new Date(a);return new Intl.DateTimeFormat(i,{day:"2-digit",month:"2-digit",year:"numeric"}).format(u)}const L=tt(()=>e.race.date>p);function b(a){let i=a.raceName.replace(/Grand Prix/i,"").trim();return a.raceName.includes("British Grand Prix")?"Great_Britain_Circuit":a.Circuit.Location.country==="Azerbaijan"?"Baku_Circuit":a.Circuit.Location.country==="Italy"&&!a.raceName.includes("Emilia Romagna")?"Italy_Circuit":a.raceName.includes("United States Grand Prix")?"USA_Circuit":a.raceName.includes("Abu Dhabi Grand Prix")?"Abu_Dhabi_Circuit":(e.races.filter(_=>_.Circuit.Location.country===a.Circuit.Location.country).length===1&&(i=a.Circuit.Location.country),i=i.replace(/\s+/g,"_").replace(/[^\w_]/g,""),i+"_Circuit")}var l=vt(),m=n(l);{var k=a=>{var i=ut(),u=n(i),_=h(u,2),d=n(_),x=n(d,!0);r(d);var v=h(d,2),N=n(v,!0);r(v);var y=h(v,2),R=n(y,!0);r(y),r(_),r(i),q((I,F,D,M)=>{Y(i,"href",`race?year=${I??""}&round=${e.race.round??""}`),Y(u,"src",F),Y(u,"alt",e.race.raceName),w(x,e.race.raceName),w(N,D),w(R,M)},[()=>new Date(e.race.date).getFullYear(),()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${b(e.race)}.jpg`,()=>g(e.race.date),()=>o()("see_results")]),j(a,i)},C=a=>{var i=dt(),u=n(i),_=h(u,2),d=n(_),x=n(d,!0);r(d);var v=h(d,2),N=n(v,!0);r(v);var y=h(v,2),R=n(y,!0);r(y),r(_),r(i),q((I,F,D)=>{Y(u,"src",I),Y(u,"alt",e.race.raceName),w(x,e.race.raceName),w(N,F),w(R,D)},[()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${b(e.race)}.jpg`,()=>new Date(e.race.date).toLocaleDateString("de-AT"),()=>o()("results_not_available")]),j(a,i)};O(m,a=>{S(L)?a(C,!1):a(k)})}r(l),q(()=>it(l,1,`rounded-xl overflow-hidden shadow transition font-titillium
  ${S(L)?"opacity-50":"cursor-pointer hover:shadow-lg"}`)),j(t,l),z(),c()}var gt=A("<option> </option>"),mt=A('<div class="flex items-center gap-2 text-black dark:text-white pt-5 pb-5"><span> </span> <select class="p-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div>');function _t(t,e){U(e,!0);const[s,c]=E(),o=()=>H(J,"$t",s);let p=ot(e,"season",15);var f=mt(),g=n(f),L=n(g,!0);r(g);var b=h(g,2);b.__change=function(...l){var m;(m=e.loadRaces)==null||m.apply(this,l)},W(b,20,()=>Array(10).fill(0).map((l,m)=>e.currentYear-m),X,(l,m)=>{var k=gt(),C={},a=n(k,!0);r(k),q(()=>{C!==(C=m)&&(k.value=(k.__value=m)??""),w(a,m)}),j(l,k)}),r(b),r(f),q(l=>w(L,l),[()=>o()("select_season")]),ct(b,p),j(t,f),z(),c()}et(["change"]);var pt=A('<title> </title> <div class="min-h-screen bg-gray-50 dark:bg-gray-950 transition-colors"><div class="flex justify-center font-titillium"><!></div> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-5"></div></div>',1),bt=A('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300"><div class="animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-blue-600 mb-6"></div> <p class="text-xl font-semibold tracking-wide"> </p></section>');function Nt(t,e){U(e,!0);const[s,c]=E(),o=()=>H(J,"$t",s),p=new Date().getFullYear();let f=P(Q(new Date().getFullYear())),g=P(Q([])),L=P(!0);async function b(){const a=await(await fetch(`https://api.jolpi.ca/ergast/f1/${S(f)}/races/`)).json();T(g,a.MRData.RaceTable.Races,!0)}rt(async()=>{await at(),T(L,!1),b()});var l=K(),m=B(l);{var k=C=>{var a=K(),i=B(a);{var u=d=>{var x=pt(),v=B(x),N=n(v,!0);r(v);var y=h(v,2),R=n(y),I=n(R);_t(I,{loadRaces:b,currentYear:p,get season(){return S(f)},set season(D){T(f,D,!0)}}),r(R);var F=h(R,2);W(F,21,()=>S(g),X,(D,M)=>{ft(D,{get race(){return S(M)},get races(){return S(g)}})}),r(F),r(y),q(D=>w(N,D),[()=>o()("races_overview")]),j(d,x)},_=d=>{var x=bt(),v=h(n(x),2),N=n(v,!0);r(v),r(x),q(y=>w(N,y),[()=>o()("loading_races")]),j(d,x)};O(i,d=>{S(g)?d(u):d(_,!1)})}j(C,a)};O(m,C=>{S(L)||C(k)})}j(t,l),z(),c()}export{Nt as component};
