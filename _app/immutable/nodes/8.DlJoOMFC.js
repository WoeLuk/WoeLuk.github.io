import{d as te,c as ae,a as _,t as h,s as M}from"../chunks/Dxuy1mk5.js";import{Q as re,R as se,u as oe,r as le,E as ie,N as k,c as T,G as ne,z as ce,O as ve,M as ue,f as g,b as t,H as v,J as N,I as o,K as y}from"../chunks/D9So642S.js";import{i as R,a as de,s as fe}from"../chunks/BTZNSVys.js";import{w as _e,r as ge,s as me,$ as be,e as Q,i as W}from"../chunks/Bnh7NVQW.js";import{l as he}from"../chunks/BsW4FbBd.js";import{g as xe}from"../chunks/B3hE-Vfr.js";function pe(e,a,d=a){var I=re();he(e,"input",l=>{var r=l?e.defaultValue:e.value;if(r=z(e)?G(r):r,d(r),I&&r!==(r=a())){var E=e.selectionStart,w=e.selectionEnd;e.value=r??"",w!==null&&(e.selectionStart=E,e.selectionEnd=Math.min(w,e.value.length))}}),(se&&e.defaultValue!==e.value||oe(a)==null&&e.value)&&d(z(e)?G(e.value):e.value),le(()=>{var l=a();z(e)&&l===G(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function z(e){var a=e.type;return a==="number"||a==="range"}function G(e){return e===""?null:+e}var ke=(e,a,d)=>a(t(d).driverId),ye=h('<li><button type="button" class="cursor-pointer px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-blue-200 dark:hover:bg-blue-600 text-black dark:text-white"> </button></li>'),we=h('<div><h2 class="text-lg font-semibold mb-2 text-black dark:text-white"> </h2> <ul class="space-y-2"></ul></div>'),$e=(e,a,d)=>a(t(d).url),De=h('<li class="w-full text-left cursor-pointer px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-green-200 dark:hover:bg-green-600 text-black dark:text-white"> </li>'),Ce=h('<div><h2 class="text-lg font-semibold mb-2 text-black dark:text-white"> </h2> <ul class="space-y-2"></ul></div>'),je=h('<p class="text-sm text-gray-500 dark:text-gray-400"> </p>'),Le=h('<div class="mt-6 space-y-6"><!> <!> <!></div>'),Me=h('<div class="max-w-xl mx-auto mt-16 px-4"><input type="text" class="w-full p-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"> <!></div>');function Ve(e,a){ie(a,!0);const[d,I]=de(),l=()=>fe(be,"$t",d);let r=k(""),E=k(T([])),w=k(T([])),$=k(T([])),D=k(T([])),H=k(!0);ne(async()=>{await _e(),g(H,!1);const s=await fetch("https://api.jolpi.ca/ergast/f1/current/drivers.json"),c=await fetch("https://api.jolpi.ca/ergast/f1/current/constructors.json"),x=await s.json(),S=await c.json();g(E,x.MRData.DriverTable.Drivers,!0),g(w,S.MRData.ConstructorTable.Constructors,!0)}),ce(()=>{if(t(r).trim().length>0){const s=t(r).toLowerCase();g($,t(E).filter(c=>`${c.givenName} ${c.familyName}`.toLowerCase().includes(s)),!0),g(D,t(w).filter(c=>c.name.toLowerCase().includes(s)),!0)}else g($,[],!0),g(D,[],!0)});function q(s){xe(`/driver/${s}`)}function A(s){window.open(s,"_blank")}var J=ae(),B=ve(J);{var F=s=>{var c=Me(),x=v(c);ge(x);var S=N(x,2);{var P=m=>{var V=Le(),K=v(V);{var U=i=>{var n=we(),u=v(n),C=v(u,!0);o(u);var j=N(u,2);Q(j,21,()=>t($),W,(b,p)=>{var f=ye(),L=v(f);L.__click=[ke,q,p];var ee=v(L);o(L),o(f),y(()=>M(ee,`${t(p).givenName??""} ${t(p).familyName??""}`)),_(b,f)}),o(j),o(n),y(b=>M(C,b),[()=>l()("drivers")]),_(i,n)};R(K,i=>{t($).length>0&&i(U)})}var O=N(K,2);{var X=i=>{var n=Ce(),u=v(n),C=v(u,!0);o(u);var j=N(u,2);Q(j,21,()=>t(D),W,(b,p)=>{var f=De();f.__click=[$e,A,p];var L=v(f,!0);o(f),y(()=>M(L,t(p).name)),_(b,f)}),o(j),o(n),y(b=>M(C,b),[()=>l()("teams")]),_(i,n)};R(O,i=>{t(D).length>0&&i(X)})}var Y=N(O,2);{var Z=i=>{var n=je(),u=v(n,!0);o(n),y(C=>M(u,C),[()=>l()("no_results")]),_(i,n)};R(Y,i=>{t($).length===0&&t(D).length===0&&i(Z)})}o(V),_(m,V)};R(S,m=>{t(r).trim().length>0&&m(P)})}o(c),y(m=>me(x,"placeholder",m),[()=>l()("search_text")]),pe(x,()=>t(r),m=>g(r,m)),_(s,c)};R(B,s=>{t(H)||s(F)})}_(e,J),ue(),I()}te(["click"]);export{Ve as component};
