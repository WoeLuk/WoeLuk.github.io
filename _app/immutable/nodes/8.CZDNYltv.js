import{t as j,a as L,c as Z}from"../chunks/D09H9Ril.js";import{h as J,ah as $,E as B,F as n,g as C,ai as tt,G as i,I as N,J as T,H as w,K as M,m as z,M as H,n as P}from"../chunks/CPpp9dO7.js";import{s as k,d as et}from"../chunks/rSjJDcws.js";import{i as K,a as E,s as O}from"../chunks/hw3Lp3oj.js";import{s as I,$ as U,e as Q,i as V,w as at}from"../chunks/BxyaKOQB.js";import{o as rt}from"../chunks/CI6rgBum.js";import{s as it}from"../chunks/5Ybmc0qm.js";import"../chunks/BmjTp0Xk.js";import{l as nt}from"../chunks/DmmpRyv1.js";import{p as ot}from"../chunks/y7QhwbXw.js";function W(t,e,o){if(t.multiple)return ut(t,e);for(var c of t.options){var s=R(c);if($(s,e)){c.selected=!0;return}}(!o||e!==void 0)&&(t.selectedIndex=-1)}function st(t,e){J(()=>{var o=new MutationObserver(()=>{var c=t.__value;W(t,c)});return o.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{o.disconnect()}})}function ct(t,e,o=e){var c=!0;nt(t,"change",s=>{var f=s?"[selected]":":checked",d;if(t.multiple)d=[].map.call(t.querySelectorAll(f),R);else{var g=t.querySelector(f)??t.querySelector("option:not([disabled])");d=g&&R(g)}o(d)}),J(()=>{var s=e();if(W(t,s,c),c&&s===void 0){var f=t.querySelector(":checked");f!==null&&(s=R(f),o(s))}t.__value=s,c=!1}),st(t)}function ut(t,e){for(var o of t.options)o.selected=~e.indexOf(R(o))}function R(t){return"__value"in t?t.__value:t.value}var lt=j('<a><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-green-600 dark:text-green-400 mt-2 font-semibold"> </p></div></a>'),dt=j('<div><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-red-600 dark:text-light-red-550 mt-2 font-semibold"> </p></div></div>'),vt=j("<div><!></div>");function gt(t,e){B(e,!0);const[o,c]=E(),s=()=>O(U,"$t",o),f=d(new Date);function d(a){const r=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),v=String(a.getDate()).padStart(2,"0");return`${r}-${l}-${v}`}function g(a,r=navigator.language){const l=new Date(a);return new Intl.DateTimeFormat(r,{day:"2-digit",month:"2-digit",year:"numeric"}).format(l)}const D=tt(()=>e.race.date>f);function p(a){let r=a.raceName.replace(/Grand Prix/i,"").trim();return a.raceName.includes("British Grand Prix")?"Great_Britain_Circuit":a.Circuit.Location.country==="Azerbaijan"?"Baku_Circuit":a.Circuit.Location.country==="Italy"&&!a.raceName.includes("Emilia Romagna")?"Italy_Circuit":a.raceName.includes("United States Grand Prix")?"USA_Circuit":a.raceName.includes("Abu Dhabi Grand Prix")?"Abu_Dhabi_Circuit":(e.races.filter(v=>v.Circuit.Location.country===a.Circuit.Location.country).length===1&&(r=a.Circuit.Location.country),r=r.replace(/\s+/g,"_").replace(/[^\w_]/g,""),r+"_Circuit")}var u=vt(),m=n(u);{var h=a=>{var r=lt(),l=n(r),v=w(l,2),_=n(v),F=n(_,!0);i(_);var b=w(_,2),x=n(b,!0);i(b);var S=w(b,2),q=n(S,!0);i(S),i(v),i(r),N((A,G,Y,X)=>{I(r,"href",`race?year=${A??""}&round=${e.race.round??""}`),I(l,"src",G),I(l,"alt",e.race.raceName),k(F,e.race.raceName),k(x,Y),k(q,X)},[()=>new Date(e.race.date).getFullYear(),()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${p(e.race)}.jpg`,()=>g(e.race.date),()=>s()("see_results")]),L(a,r)},y=a=>{var r=dt(),l=n(r),v=w(l,2),_=n(v),F=n(_,!0);i(_);var b=w(_,2),x=n(b,!0);i(b);var S=w(b,2),q=n(S,!0);i(S),i(v),i(r),N((A,G,Y)=>{I(l,"src",A),I(l,"alt",e.race.raceName),k(F,e.race.raceName),k(x,G),k(q,Y)},[()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${p(e.race)}.jpg`,()=>new Date(e.race.date).toLocaleDateString("de-AT"),()=>s()("results_not_available")]),L(a,r)};K(m,a=>{C(D)?a(y,!1):a(h)})}i(u),N(()=>it(u,1,`rounded-xl overflow-hidden shadow transition font-titillium
  ${C(D)?"opacity-50":"cursor-pointer hover:shadow-lg"}`)),L(t,u),T(),c()}var mt=j("<option> </option>"),ft=j('<div class="flex items-center gap-2 text-black dark:text-white pt-5 pb-5"><span> </span> <select class="p-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div>');function _t(t,e){B(e,!0);const[o,c]=E(),s=()=>O(U,"$t",o);let f=ot(e,"season",15);var d=ft(),g=n(d),D=n(g,!0);i(g);var p=w(g,2);p.__change=function(...u){var m;(m=e.loadRaces)==null||m.apply(this,u)},Q(p,20,()=>Array(10).fill(0).map((u,m)=>e.currentYear-m),V,(u,m)=>{var h=mt(),y={},a=n(h,!0);i(h),N(()=>{y!==(y=m)&&(h.value=(h.__value=m)??""),k(a,m)}),L(u,h)}),i(p),i(d),N(u=>k(D,u),[()=>s()("select_season")]),ct(p,f),L(t,d),T(),c()}et(["change"]);var pt=j('<title> </title> <div class="min-h-screen bg-gray-50 dark:bg-gray-950 transition-colors"><div class="flex justify-center font-titillium"><!></div> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-5"></div></div>',1);function Nt(t,e){B(e,!0);const[o,c]=E(),s=()=>O(U,"$t",o),f=new Date().getFullYear();let d=M(z(new Date().getFullYear())),g=M(z([])),D=M(!0);async function p(){const a=await(await fetch(`https://api.jolpi.ca/ergast/f1/${C(d)}/races/`)).json();P(g,a.MRData.RaceTable.Races,!0)}rt(async()=>{await at(),P(D,!1),p()});var u=Z(),m=H(u);{var h=y=>{var a=pt(),r=H(a),l=n(r,!0);i(r);var v=w(r,2),_=n(v),F=n(_);_t(F,{loadRaces:p,currentYear:f,get season(){return C(d)},set season(x){P(d,x,!0)}}),i(_);var b=w(_,2);Q(b,21,()=>C(g),V,(x,S)=>{gt(x,{get race(){return C(S)},get races(){return C(g)}})}),i(b),i(v),N(x=>k(l,x),[()=>s()("races_overview")]),L(y,a)};K(m,y=>{C(D)||y(h)})}L(t,u),T(),c()}export{Nt as component};
