import{t as R,a as j,c as K}from"../chunks/jk-KqXiE.js";import{h as V,ag as $,E as O,F as n,g as S,ah as tt,G as r,I,J as U,H as y,K as P,v as Q,M as B,w as T}from"../chunks/DkwZ7NE_.js";import{s as w,d as et}from"../chunks/DqfCd0HL.js";import{i as E,a as z,s as H}from"../chunks/CgyMSjB3.js";import{s as G,$ as J,e as W,i as X,w as at}from"../chunks/Cu2f1RHe.js";import{o as rt}from"../chunks/CneGok6B.js";import{s as it}from"../chunks/H1dPxqNM.js";import"../chunks/DN_5PDab.js";import{l as nt}from"../chunks/DlKu_-6a.js";import{p as ot}from"../chunks/neVDGEr_.js";function Z(t,e,s){if(t.multiple)return lt(t,e);for(var c of t.options){var o=Y(c);if($(o,e)){c.selected=!0;return}}(!s||e!==void 0)&&(t.selectedIndex=-1)}function st(t,e){V(()=>{var s=new MutationObserver(()=>{var c=t.__value;Z(t,c)});return s.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function ct(t,e,s=e){var c=!0;nt(t,"change",o=>{var p=o?"[selected]":":checked",g;if(t.multiple)g=[].map.call(t.querySelectorAll(p),Y);else{var f=t.querySelector(p)??t.querySelector("option:not([disabled])");g=f&&Y(f)}s(g)}),V(()=>{var o=e();if(Z(t,o,c),c&&o===void 0){var p=t.querySelector(":checked");p!==null&&(o=Y(p),s(o))}t.__value=o,c=!1}),st(t)}function lt(t,e){for(var s of t.options)s.selected=~e.indexOf(Y(s))}function Y(t){return"__value"in t?t.__value:t.value}var ut=R('<a><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-green-600 dark:text-green-400 mt-2 font-semibold"> </p></div></a>'),dt=R('<div><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-red-600 dark:text-light-red-550 mt-2 font-semibold"> </p></div></div>'),vt=R("<div><!></div>");function gt(t,e){O(e,!0);const[s,c]=z(),o=()=>H(J,"$t",s),p=g(new Date);function g(a){const i=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),_=String(a.getDate()).padStart(2,"0");return`${i}-${u}-${_}`}function f(a,i=navigator.language){const u=new Date(a);return new Intl.DateTimeFormat(i,{day:"2-digit",month:"2-digit",year:"numeric"}).format(u)}const L=tt(()=>e.race.date>p);function b(a){let i=a.raceName.replace(/Grand Prix/i,"").trim();return a.raceName.includes("British Grand Prix")?"Great_Britain_Circuit":a.Circuit.Location.country==="Azerbaijan"?"Baku_Circuit":a.Circuit.Location.country==="Italy"&&!a.raceName.includes("Emilia Romagna")?"Italy_Circuit":a.raceName.includes("United States Grand Prix")?"USA_Circuit":a.raceName.includes("Abu Dhabi Grand Prix")?"Abu_Dhabi_Circuit":(e.races.filter(_=>_.Circuit.Location.country===a.Circuit.Location.country).length===1&&(i=a.Circuit.Location.country),i=i.replace(/\s+/g,"_").replace(/[^\w_]/g,""),i+"_Circuit")}var l=vt(),m=n(l);{var k=a=>{var i=ut(),u=n(i),_=y(u,2),d=n(_),x=n(d,!0);r(d);var v=y(d,2),N=n(v,!0);r(v);var h=y(v,2),F=n(h,!0);r(h),r(_),r(i),I((A,q,D,M)=>{G(i,"href",`race?year=${A??""}&round=${e.race.round??""}`),G(u,"src",q),G(u,"alt",e.race.raceName),w(x,e.race.raceName),w(N,D),w(F,M)},[()=>new Date(e.race.date).getFullYear(),()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${b(e.race)}.jpg`,()=>f(e.race.date),()=>o()("see_results")]),j(a,i)},C=a=>{var i=dt(),u=n(i),_=y(u,2),d=n(_),x=n(d,!0);r(d);var v=y(d,2),N=n(v,!0);r(v);var h=y(v,2),F=n(h,!0);r(h),r(_),r(i),I((A,q,D)=>{G(u,"src",A),G(u,"alt",e.race.raceName),w(x,e.race.raceName),w(N,q),w(F,D)},[()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${b(e.race)}.jpg`,()=>new Date(e.race.date).toLocaleDateString("de-AT"),()=>o()("results_not_available")]),j(a,i)};E(m,a=>{S(L)?a(C,!1):a(k)})}r(l),I(()=>it(l,1,`rounded-xl overflow-hidden shadow transition font-titillium
  ${S(L)?"opacity-50":"cursor-pointer hover:shadow-lg"}`)),j(t,l),U(),c()}var ft=R("<option> </option>"),mt=R('<div class="flex items-center gap-2 text-black dark:text-white pt-5 pb-5"><span> </span> <select class="p-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div>');function _t(t,e){O(e,!0);const[s,c]=z(),o=()=>H(J,"$t",s);let p=ot(e,"season",15);var g=mt(),f=n(g),L=n(f,!0);r(f);var b=y(f,2);b.__change=function(...l){var m;(m=e.loadRaces)==null||m.apply(this,l)},W(b,20,()=>Array(10).fill(0).map((l,m)=>e.currentYear-m),X,(l,m)=>{var k=ft(),C={},a=n(k,!0);r(k),I(()=>{C!==(C=m)&&(k.value=(k.__value=m)??""),w(a,m)}),j(l,k)}),r(b),r(g),I(l=>w(L,l),[()=>o()("select_season")]),ct(b,p),j(t,g),U(),c()}et(["change"]);var pt=R('<title> </title> <div class="min-h-screen bg-gray-50 dark:bg-gray-950 transition-colors"><div class="flex justify-center font-titillium"><!></div> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-5"></div></div>',1),bt=R('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300"><div class="animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-blue-600 mb-6"></div> <p class="text-xl font-semibold tracking-wide"> </p></section>');function Nt(t,e){O(e,!0);const[s,c]=z(),o=()=>H(J,"$t",s),p=new Date().getFullYear();let g=P(Q(new Date().getFullYear())),f=P(Q([])),L=P(!0);async function b(){const a=await(await fetch(`https://api.jolpi.ca/ergast/f1/${S(g)}/races/`)).json();T(f,a.MRData.RaceTable.Races,!0)}rt(async()=>{await at(),T(L,!1),b()});var l=K(),m=B(l);{var k=C=>{var a=K(),i=B(a);{var u=d=>{var x=pt(),v=B(x),N=n(v,!0);r(v);var h=y(v,2),F=n(h),A=n(F);_t(A,{loadRaces:b,currentYear:p,get season(){return S(g)},set season(D){T(g,D,!0)}}),r(F);var q=y(F,2);W(q,21,()=>S(f),X,(D,M)=>{gt(D,{get race(){return S(M)},get races(){return S(f)}})}),r(q),r(h),I(D=>w(N,D),[()=>o()("races_overview")]),j(d,x)},_=d=>{var x=bt(),v=y(n(x),2),N=n(v,!0);r(v),r(x),I(h=>w(N,h),[()=>o()("loading_races")]),j(d,x)};E(i,d=>{S(f)?d(u):d(_,!1)})}j(C,a)};E(m,C=>{S(L)||C(k)})}j(t,l),U(),c()}export{Nt as component};
