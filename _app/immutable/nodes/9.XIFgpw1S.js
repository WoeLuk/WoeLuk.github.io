import{t as R,a as j,c as K}from"../chunks/BkI3zN53.js";import{e as V,a7 as $,E as O,F as n,g as S,a8 as ee,G as r,I,J as U,H as h,K as P,v as Q,M as B,w as T}from"../chunks/BLUcMZr5.js";import{s as w,d as te}from"../chunks/CHLV5_7l.js";import{i as E,a as z,s as H}from"../chunks/CseYTNom.js";import{s as G,$ as J,e as W,i as X,w as ae}from"../chunks/DsBcZ_8l.js";import{o as re}from"../chunks/D5lhNXsb.js";import{s as ie}from"../chunks/CqU0ykXX.js";import"../chunks/DqmN7GC-.js";import{l as ne}from"../chunks/DPj9t-il.js";import{p as oe}from"../chunks/DL4oVkWf.js";function Z(e,t,s){if(e.multiple)return le(e,t);for(var c of e.options){var o=Y(c);if($(o,t)){c.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function se(e,t){V(()=>{var s=new MutationObserver(()=>{var c=e.__value;Z(e,c)});return s.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function ce(e,t,s=t){var c=!0;ne(e,"change",o=>{var p=o?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(p),Y);else{var g=e.querySelector(p)??e.querySelector("option:not([disabled])");f=g&&Y(g)}s(f)}),V(()=>{var o=t();if(Z(e,o,c),c&&o===void 0){var p=e.querySelector(":checked");p!==null&&(o=Y(p),s(o))}e.__value=o,c=!1}),se(e)}function le(e,t){for(var s of e.options)s.selected=~t.indexOf(Y(s))}function Y(e){return"__value"in e?e.__value:e.value}var ue=R('<a><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-green-600 dark:text-green-400 mt-2 font-semibold"> </p></div></a>'),de=R('<div><img class="w-full h-40 object-contain bg-gray-100 dark:bg-gray-800 p-1"> <div class="p-4 bg-white dark:bg-gray-900"><h3 class="font-bold text-lg dark:text-gray-300"> </h3> <p class="text-gray-600 dark:text-gray-300"> </p> <p class="text-red-600 dark:text-light-red-550 mt-2 font-semibold"> </p></div></div>'),ve=R("<div><!></div>");function fe(e,t){O(t,!0);const[s,c]=z(),o=()=>H(J,"$t",s),p=f(new Date);function f(a){const i=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),_=String(a.getDate()).padStart(2,"0");return`${i}-${u}-${_}`}function g(a,i=navigator.language){const u=new Date(a);return new Intl.DateTimeFormat(i,{day:"2-digit",month:"2-digit",year:"numeric"}).format(u)}const L=ee(()=>t.race.date>p);function b(a){let i=a.raceName.replace(/Grand Prix/i,"").trim();return a.raceName.includes("British Grand Prix")?"Great_Britain_Circuit":a.Circuit.Location.country==="Azerbaijan"?"Baku_Circuit":a.Circuit.Location.country==="Italy"&&!a.raceName.includes("Emilia Romagna")?"Italy_Circuit":a.raceName.includes("United States Grand Prix")?"USA_Circuit":a.raceName.includes("Abu Dhabi Grand Prix")?"Abu_Dhabi_Circuit":(t.races.filter(_=>_.Circuit.Location.country===a.Circuit.Location.country).length===1&&(i=a.Circuit.Location.country),i=i.replace(/\s+/g,"_").replace(/[^\w_]/g,""),i+"_Circuit")}var l=ve(),m=n(l);{var k=a=>{var i=ue(),u=n(i),_=h(u,2),d=n(_),x=n(d,!0);r(d);var v=h(d,2),N=n(v,!0);r(v);var y=h(v,2),F=n(y,!0);r(y),r(_),r(i),I((A,q,D,M)=>{G(i,"href",`race?year=${A??""}&round=${t.race.round??""}`),G(u,"src",q),G(u,"alt",t.race.raceName),w(x,t.race.raceName),w(N,D),w(F,M)},[()=>new Date(t.race.date).getFullYear(),()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${b(t.race)}.jpg`,()=>g(t.race.date),()=>o()("see_results")]),j(a,i)},C=a=>{var i=de(),u=n(i),_=h(u,2),d=n(_),x=n(d,!0);r(d);var v=h(d,2),N=n(v,!0);r(v);var y=h(v,2),F=n(y,!0);r(y),r(_),r(i),I((A,q,D)=>{G(u,"src",A),G(u,"alt",t.race.raceName),w(x,t.race.raceName),w(N,q),w(F,D)},[()=>`https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/${b(t.race)}.jpg`,()=>new Date(t.race.date).toLocaleDateString("de-AT"),()=>o()("results_not_available")]),j(a,i)};E(m,a=>{S(L)?a(C,!1):a(k)})}r(l),I(()=>ie(l,1,`rounded-xl overflow-hidden shadow transition font-titillium
  ${S(L)?"opacity-50":"cursor-pointer hover:shadow-lg"}`)),j(e,l),U(),c()}var ge=R("<option> </option>"),me=R('<div class="flex items-center gap-2 text-black dark:text-white pt-5 pb-5"><span> </span> <select class="p-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-800 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div>');function _e(e,t){O(t,!0);const[s,c]=z(),o=()=>H(J,"$t",s);let p=oe(t,"season",15);var f=me(),g=n(f),L=n(g,!0);r(g);var b=h(g,2);b.__change=function(...l){var m;(m=t.loadRaces)==null||m.apply(this,l)},W(b,20,()=>Array(10).fill(0).map((l,m)=>t.currentYear-m),X,(l,m)=>{var k=ge(),C={},a=n(k,!0);r(k),I(()=>{C!==(C=m)&&(k.value=(k.__value=m)??""),w(a,m)}),j(l,k)}),r(b),r(f),I(l=>w(L,l),[()=>o()("select_season")]),ce(b,p),j(e,f),U(),c()}te(["change"]);var pe=R('<title> </title> <div class="min-h-screen bg-gray-50 dark:bg-gray-950 transition-colors"><div class="flex justify-center font-titillium"><!></div> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-5"></div></div>',1),be=R('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300"><div class="animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-blue-600 mb-6"></div> <p class="text-xl font-semibold tracking-wide"> </p></section>');function Ne(e,t){O(t,!0);const[s,c]=z(),o=()=>H(J,"$t",s),p=new Date().getFullYear();let f=P(Q(new Date().getFullYear())),g=P(Q([])),L=P(!0);async function b(){const a=await(await fetch(`https://api.jolpi.ca/ergast/f1/${S(f)}/races/`)).json();T(g,a.MRData.RaceTable.Races,!0)}re(async()=>{await ae(),T(L,!1),b()});var l=K(),m=B(l);{var k=C=>{var a=K(),i=B(a);{var u=d=>{var x=pe(),v=B(x),N=n(v,!0);r(v);var y=h(v,2),F=n(y),A=n(F);_e(A,{loadRaces:b,currentYear:p,get season(){return S(f)},set season(D){T(f,D,!0)}}),r(F);var q=h(F,2);W(q,21,()=>S(g),X,(D,M)=>{fe(D,{get race(){return S(M)},get races(){return S(g)}})}),r(q),r(y),I(D=>w(N,D),[()=>o()("races_overview")]),j(d,x)},_=d=>{var x=be(),v=h(n(x),2),N=n(v,!0);r(v),r(x),I(y=>w(N,y),[()=>o()("loading_races")]),j(d,x)};E(i,d=>{S(g)?d(u):d(_,!1)})}j(C,a)};E(m,C=>{S(L)||C(k)})}j(e,l),U(),c()}export{Ne as component};
