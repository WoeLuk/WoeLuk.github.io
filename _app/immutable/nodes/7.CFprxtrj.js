import{c as St,a as $,t as E}from"../chunks/BkI3zN53.js";import"../chunks/9Q_aoU_1.js";import{E as ir,N as jt,O as nr,M as Tt,J as vr,w as S,x as D,g as s,H as e,F as r,G as t,I as A,o as C,Q as dr}from"../chunks/BLUcMZr5.js";import{s as a}from"../chunks/CHLV5_7l.js";import{i as Dt,a as lr,s as _r}from"../chunks/CseYTNom.js";import{w as cr,$ as pr,e as dt,i as Lt,s as mr}from"../chunks/DsBcZ_8l.js";import{s as It,c as Rt}from"../chunks/CqU0ykXX.js";import{i as gr}from"../chunks/Dz3q5bLF.js";import{o as fr}from"../chunks/D5lhNXsb.js";var xr=E('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300"><div class="animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-blue-600 mb-6"></div> <p class="text-xl font-semibold tracking-wide"> </p></section>'),br=E('<tr><td class="p-2"> </td><td class="p-2 flex items-center gap-2"> <strong> </strong></td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td></tr>'),hr=E('<tr><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td></tr>'),ur=E('<div class="p-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="flex items-center gap-2 mb-2"><p><strong> </strong> </p></div> <p class="mb-1"><strong> </strong> </p> <img alt="Tire" class="w-16 h-16 mb-2"> <p class="mb-1"><strong> </strong> </p> <p class="mb-1"><strong> </strong> </p> <p><strong> </strong> </p></div>'),yr=E('<div class="border-2 border-gray-300 dark:border-gray-700 rounded-xl p-4 m-4 font-sans bg-white dark:bg-gray-900 text-black dark:text-white transition-colors"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold">F1 Live Tracker</h1></div> <h2 class="text-xl font-semibold mb-3"> </h2> <div class="overflow-x-auto"><table class="w-full text-sm border border-gray-300 dark:border-gray-700 rounded"><thead class="bg-gray-100 dark:bg-gray-800"><tr><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left">Total</th></tr></thead><tbody></tbody></table></div> <h2 class="text-xl font-semibold mt-8 mb-3"> </h2> <div class="overflow-x-auto"><table class="w-full text-sm border border-gray-300 dark:border-gray-700 rounded"><thead class="bg-gray-100 dark:bg-gray-800"><tr><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th></tr></thead><tbody></tbody></table></div> <h2 class="text-xl font-semibold mt-8 mb-3"> </h2> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div></div>'),wr=E('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300 text-center"><p class="text-2xl font-bold"> </p></section>');function Mr(Mt,Pt){ir(Pt,!1);const[At,Ct]=lr(),n=()=>_r(pr,"$t",At),lt=D(),_t=D();let ct=[],j=D([]),N=D([]),O=D([]),pt=D(!0),J=D(!1);async function Et(){const i=await(await fetch("https://api.openf1.org/v1/sessions?session_key=latest")).json();if(i.length===0)return!1;const d=i[0],c=new Date,w=new Date(d.session_start_time);return S(J,w<=c),s(J)}async function mt(){const[v,i,d,c]=await Promise.all([fetch("https://api.openf1.org/v1/drivers?session_key=latest"),fetch("https://api.openf1.org/v1/stints?session_key=latest"),fetch("https://api.openf1.org/v1/laps?session_key=latest"),fetch("https://api.openf1.org/v1/pit?session_key=latest")]);ct=await v.json(),S(j,await i.json()),S(N,await d.json()),S(O,await c.json())}function Q(v){var i;return((i=ct.find(d=>d.driver_number===v))==null?void 0:i.name_acronym)||""}fr(async()=>{await cr();const v=await Et();if(S(J,v),v){await mt();const i=setInterval(mt,1e4),d=window.matchMedia("(prefers-color-scheme: dark)");return d.matches,d.addEventListener("change",c=>c.matches),()=>clearInterval(i)}S(pt,!1)}),jt(()=>s(j),()=>{S(lt,[...s(j)].sort((v,i)=>v.position-i.position))}),jt(()=>(s(N),s(j)),()=>{S(_t,[...s(N)].sort((v,i)=>{var w,f;const d=((w=s(j).find(p=>p.driver_number===v.driver_number))==null?void 0:w.position)??99,c=((f=s(j).find(p=>p.driver_number===i.driver_number))==null?void 0:f.position)??99;return d-c}))}),nr(),gr();var gt=St(),Ft=Tt(gt);{var qt=v=>{var i=xr(),d=e(r(i),2),c=r(d,!0);t(d),t(i),A(w=>a(c,w),[()=>n()("loading")],C),$(v,i)},Bt=v=>{var i=St(),d=Tt(i);{var c=f=>{var p=yr(),L=e(r(p),2),z=r(L,!0);t(L);var F=e(L,2),ft=r(F),K=r(ft),xt=r(K),U=r(xt),Gt=r(U,!0);t(U);var V=e(U),Ht=r(V,!0);t(V);var W=e(V),Jt=r(W,!0);t(W);var X=e(W),Nt=r(X);t(X);var Y=e(X),Ot=r(Y);t(Y);var bt=e(Y),Qt=r(bt);t(bt),dr(),t(xt),t(K);var ht=e(K);dt(ht,5,()=>s(_t).slice(-30),Lt,(x,o,b)=>{var l=br();It(l,1,Rt(b%2===0?"bg-gray-50 dark:bg-gray-800":""));var _=r(l),h=r(_,!0);t(_);var m=e(_),k=r(m),g=e(k),u=r(g,!0);t(g),t(m);var y=e(m),q=r(y,!0);t(y);var I=e(y),B=r(I,!0);t(I);var T=e(I),ot=r(T,!0);t(T);var G=e(T),H=r(G,!0);t(G);var R=e(G),it=r(R,!0);t(R),t(l),A((M,P)=>{a(h,M),a(k,`${s(o).driver_number??""} - `),a(u,P),a(q,s(o).lap_number),a(B,s(o).sector_1_time),a(ot,s(o).sector_2_time),a(H,s(o).sector_3_time),a(it,s(o).lap_time)},[()=>{var M;return((M=s(j).find(P=>P.driver_number===s(o).driver_number))==null?void 0:M.position)??"-"},()=>Q(s(o).driver_number)],C),$(x,l)}),t(ht),t(ft),t(F);var Z=e(F,2),zt=r(Z,!0);t(Z);var tt=e(Z,2),ut=r(tt),rt=r(ut),yt=r(rt),et=r(yt),Kt=r(et,!0);t(et);var at=e(et),Ut=r(at,!0);t(at);var wt=e(at),Vt=r(wt,!0);t(wt),t(yt),t(rt);var kt=e(rt);dt(kt,5,()=>s(O),Lt,(x,o,b)=>{var l=hr();It(l,1,Rt(b%2===0?"bg-gray-50 dark:bg-gray-800":""));var _=r(l),h=r(_);t(_);var m=e(_),k=r(m,!0);t(m);var g=e(m),u=r(g,!0);t(g),t(l),A(y=>{a(h,`${s(o).driver_number??""} (${y??""})`),a(k,s(o).lap_number),a(u,s(o).pit_duration)},[()=>Q(s(o).driver_number)],C),$(x,l)}),t(kt),t(ut),t(tt);var st=e(tt,2),Wt=r(st,!0);t(st);var $t=e(st,2);dt($t,5,()=>s(lt),x=>x.driver_number,(x,o)=>{var b=ur(),l=r(b),_=r(l),h=r(_),m=r(h);t(h);var k=e(h);t(_),t(l);var g=e(l,2),u=r(g),y=r(u);t(u);var q=e(u);t(g);var I=e(g,2),B=e(I,2),T=r(B),ot=r(T);t(T);var G=e(T);t(B);var H=e(B,2),R=r(H),it=r(R);t(R);var M=e(R);t(H);var P=e(H,2),nt=r(P),Xt=r(nt);t(nt);var Yt=e(nt);t(P),t(b),A((vt,Zt,tr,rr,er,ar,sr,or)=>{a(m,`${vt??""}:`),a(k,` ${s(o).driver_number??""} (${Zt??""})`),a(y,`${tr??""}:`),a(q,` ${s(o).compound??""}`),mr(I,"src",rr),a(ot,`${er??""}:`),a(G,` ${ar??""}`),a(it,`${sr??""}:`),a(M,` ${s(o).position??""}`),a(Xt,`${or??""}:`),a(Yt,` ${s(o).grid_position??""}`)},[()=>n()("driver"),()=>Q(s(o).driver_number),()=>n()("currentTire"),()=>`/tyres/${s(o).compound.toLowerCase()}.svg`,()=>n()("pitStops"),()=>s(O).filter(vt=>vt.driver_number===s(o).driver_number).length,()=>n()("currentPos"),()=>n()("startPos")],C),$(x,b)}),t($t),t(p),A((x,o,b,l,_,h,m,k,g,u,y,q)=>{a(z,x),a(Gt,o),a(Ht,b),a(Jt,l),a(Nt,`${_??""} 1`),a(Ot,`${h??""} 2`),a(Qt,`${m??""} 3`),a(zt,k),a(Kt,g),a(Ut,u),a(Vt,y),a(Wt,q)},[()=>n()("lapTimes"),()=>n()("position"),()=>n()("driver"),()=>n()("lap"),()=>n()("sector"),()=>n()("sector"),()=>n()("sector"),()=>n()("pitStopDuration"),()=>n()("driver"),()=>n()("lap"),()=>n()("pitStopDuration"),()=>n()("driverInfo")],C),$(f,p)},w=f=>{var p=wr(),L=r(p),z=r(L,!0);t(L),t(p),A(F=>a(z,F),[()=>n()("noSession")],C),$(f,p)};Dt(d,f=>{s(J)?f(c):f(w,!1)})}$(v,i)};Dt(Ft,v=>{s(pt)?v(qt):v(Bt,!1)})}$(Mt,gt),vr(),Ct()}export{Mr as component};
