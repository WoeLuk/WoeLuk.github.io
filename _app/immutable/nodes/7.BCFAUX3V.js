import{c as Lt,a as $,t as I}from"../chunks/BE1S9mg2.js";import{E as dr,K as S,v as K,g as s,M as dt,J as lr,w as f,H as e,F as r,G as t,I as F,N as cr}from"../chunks/BWYCKkKF.js";import{s as a}from"../chunks/Ber4Waa7.js";import{i as lt,a as _r,s as pr}from"../chunks/CyjTV0IL.js";import{w as ur,$ as gr,e as ct,i as It,s as fr}from"../chunks/QBDYOrBO.js";import{s as Mt,c as Rt}from"../chunks/DKL4Dzsf.js";import{o as xr}from"../chunks/Cn1N4oY2.js";var mr=I('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300"><div class="animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-blue-600 mb-6"></div> <p class="text-xl font-semibold tracking-wide"> </p></section>'),hr=I('<tr><td class="p-2"></td><td class="p-2 flex items-center gap-2"> <strong> </strong></td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td></tr>'),br=I('<td class="p-2"> </td> <td class="p-2"> </td> <td class="p-2"> </td>',1),yr=I("<tr><!></tr>"),wr=I('<div class="p-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="flex items-center gap-2 mb-2"><p><strong> </strong> </p></div> <p class="mb-1"><strong> </strong> </p> <img alt="Tire" class="w-16 h-16 mb-2"> <p class="mb-1"><strong> </strong> </p> <p class="mb-1"><strong> </strong> </p> <p><strong> </strong> </p></div>'),kr=I('<div class="border-2 border-gray-300 dark:border-gray-700 rounded-xl p-4 m-4 font-sans bg-white dark:bg-gray-900 text-black dark:text-white transition-colors"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold">F1 Live Tracker</h1></div> <h2 class="text-xl font-semibold mb-3"> </h2> <div class="overflow-x-auto"><table class="w-full text-sm border border-gray-300 dark:border-gray-700 rounded"><thead class="bg-gray-100 dark:bg-gray-800"><tr><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left">Total</th></tr></thead><tbody></tbody></table></div> <h2 class="text-xl font-semibold mt-8 mb-3"> </h2> <div class="overflow-x-auto"><table class="w-full text-sm border border-gray-300 dark:border-gray-700 rounded"><thead class="bg-gray-100 dark:bg-gray-800"><tr><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th></tr></thead><tbody></tbody></table></div> <h2 class="text-xl font-semibold mt-8 mb-3"> </h2> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div></div>'),$r=I('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300 text-center"><p class="text-2xl font-bold"> </p></section>');function Rr(Ct,Ft){dr(Ft,!0);const[Nt,Pt]=_r(),v=()=>pr(gr,"$t",Nt);let _t=S(K([])),pt=S(K([])),ut=S(K([])),q=S(K([])),gt=S(!0),H=S(!1),ft=S(!1),xt=S(null);function Et(){return[...s(ut)].filter(o=>o.lap_duration).sort((o,i)=>o.lap_duration-i.lap_duration)}async function At(){const i=await(await fetch("https://api.openf1.org/v1/sessions?session_key=latest")).json();if(i.length===0)return!1;const d=i[0],x=new Date,P=new Date(d.date_start);return f(H,P<=x),s(H)}async function mt(){const[o,i,d,x]=await Promise.all([fetch("https://api.openf1.org/v1/drivers?session_key=latest"),fetch("https://api.openf1.org/v1/stints?session_key=latest"),fetch("https://api.openf1.org/v1/laps?session_key=latest"),fetch("https://api.openf1.org/v1/pit?session_key=latest")]);f(_t,await o.json(),!0),f(pt,await i.json(),!0),f(ut,await d.json(),!0),f(q,await x.json(),!0),f(xt,Et(),!0)}function z(o){var i;return((i=s(_t).find(d=>d.driver_number===o))==null?void 0:i.name_acronym)||""}const Gt=Ht();function Ht(){return[...s(pt)].sort((o,i)=>o.position-i.position)}function N(o){if(!o||isNaN(o))return"-";const i=Math.floor(o/60),d=(o%60).toFixed(3).padStart(6,"0");return i>0?`${i}:${d}`:d}xr(async()=>{await ur();const o=await At();if(f(H,o,!0),o){await mt(),f(gt,!1);const i=setInterval(mt,1e4),d=window.matchMedia("(prefers-color-scheme: dark)");return f(ft,d.matches,!0),d.addEventListener("change",x=>f(ft,x.matches,!0)),()=>clearInterval(i)}});var ht=Lt(),Jt=dt(ht);{var Kt=o=>{var i=mr(),d=e(r(i),2),x=r(d,!0);t(d),t(i),F(P=>a(x,P),[()=>v()("loading")]),$(o,i)},qt=o=>{var i=Lt(),d=dt(i);{var x=M=>{var T=kr(),R=e(r(T),2),B=r(R,!0);t(R);var E=e(R,2),bt=r(E),O=r(bt),yt=r(O),Q=r(yt),zt=r(Q,!0);t(Q);var U=e(Q),Bt=r(U,!0);t(U);var V=e(U),Ot=r(V,!0);t(V);var W=e(V),Qt=r(W);t(W);var X=e(W),Ut=r(X);t(X);var wt=e(X),Vt=r(wt);t(wt),cr(),t(yt),t(O);var kt=e(O);ct(kt,21,()=>s(xt).slice(-30),It,(m,n,u)=>{var l=hr();Mt(l,1,Rt(u%2===0?"bg-gray-50 dark:bg-gray-800":""));var h=r(l);h.textContent=u+1;var c=e(h),g=r(c),b=e(g),_=r(b,!0);t(b),t(c);var p=e(c),y=r(p,!0);t(p);var w=e(p),j=r(w,!0);t(w);var k=e(w),D=r(k,!0);t(k);var L=e(k),st=r(L,!0);t(L);var C=e(L),A=r(C,!0);t(C),t(l),F((ot,it,J,G,nt)=>{a(g,`${s(n).driver_number??""} - `),a(_,ot),a(y,s(n).lap_number),a(j,it),a(D,J),a(st,G),a(A,nt)},[()=>z(s(n).driver_number),()=>N(s(n).duration_sector_1),()=>N(s(n).duration_sector_2),()=>N(s(n).duration_sector_3),()=>N(s(n).lap_duration)]),$(m,l)}),t(kt),t(bt),t(E);var Y=e(E,2),Wt=r(Y,!0);t(Y);var Z=e(Y,2),$t=r(Z),tt=r($t),St=r(tt),rt=r(St),Xt=r(rt,!0);t(rt);var et=e(rt),Yt=r(et,!0);t(et);var Tt=e(et),Zt=r(Tt,!0);t(Tt),t(St),t(tt);var jt=e(tt);ct(jt,21,()=>s(q),It,(m,n,u)=>{var l=yr();Mt(l,1,Rt(u%2===0?"bg-gray-50 dark:bg-gray-800":""));var h=r(l);{var c=g=>{var b=br(),_=dt(b),p=r(_);t(_);var y=e(_,2),w=r(y,!0);t(y);var j=e(y,2),k=r(j,!0);t(j),F((D,L)=>{a(p,`${s(n).driver_number??""} (${D??""})`),a(w,s(n).lap_number),a(k,L)},[()=>z(s(n).driver_number),()=>N(s(n).pit_duration)]),$(g,b)};lt(h,g=>{s(n).lap_number!==1&&g(c)})}t(l),$(m,l)}),t(jt),t($t),t(Z);var at=e(Z,2),tr=r(at,!0);t(at);var Dt=e(at,2);ct(Dt,21,()=>Gt,m=>m.driver_number,(m,n)=>{var u=wr(),l=r(u),h=r(l),c=r(h),g=r(c);t(c);var b=e(c);t(h),t(l);var _=e(l,2),p=r(_),y=r(p);t(p);var w=e(p);t(_);var j=e(_,2),k=e(j,2),D=r(k),L=r(D);t(D);var st=e(D);t(k);var C=e(k,2),A=r(C),ot=r(A);t(A);var it=e(A);t(C);var J=e(C,2),G=r(J),nt=r(G);t(G);var rr=e(G);t(J),t(u),F((vt,er,ar,sr,or,ir,nr,vr)=>{a(g,`${vt??""}:`),a(b,` ${s(n).driver_number??""} (${er??""})`),a(y,`${ar??""}:`),a(w,` ${s(n).compound??""}`),fr(j,"src",sr),a(L,`${or??""}:`),a(st,` ${ir??""}`),a(ot,`${nr??""}:`),a(it,` ${s(n).position??""}`),a(nt,`${vr??""}:`),a(rr,` ${s(n).grid_position??""}`)},[()=>v()("driver"),()=>z(s(n).driver_number),()=>v()("currentTire"),()=>`/tyres/${s(n).compound.toLowerCase()}.svg`,()=>v()("pitStops"),()=>s(q).filter(vt=>vt.driver_number===s(n).driver_number).length,()=>v()("currentPos"),()=>v()("startPos")]),$(m,u)}),t(Dt),t(T),F((m,n,u,l,h,c,g,b,_,p,y,w)=>{a(B,m),a(zt,n),a(Bt,u),a(Ot,l),a(Qt,`${h??""} 1`),a(Ut,`${c??""} 2`),a(Vt,`${g??""} 3`),a(Wt,b),a(Xt,_),a(Yt,p),a(Zt,y),a(tr,w)},[()=>v()("lapTimes"),()=>v()("position"),()=>v()("driver"),()=>v()("lap"),()=>v()("sector"),()=>v()("sector"),()=>v()("sector"),()=>v()("pitStopDuration"),()=>v()("driver"),()=>v()("lap"),()=>v()("pitStopDuration"),()=>v()("driverInfo")]),$(M,T)},P=M=>{var T=$r(),R=r(T),B=r(R,!0);t(R),t(T),F(E=>a(B,E),[()=>v()("noSession")]),$(M,T)};lt(d,M=>{s(H)?M(x):M(P,!1)})}$(o,i)};lt(Jt,o=>{s(gt)?o(Kt):o(qt,!1)})}$(Ct,ht),lr(),Pt()}export{Rr as component};
