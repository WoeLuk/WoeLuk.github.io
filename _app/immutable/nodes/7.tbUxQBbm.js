import{c as At,a as D,t as A}from"../chunks/95_l2rzH.js";import{p as sr,s as b,k as q,l as vt,m as or,n as u,g as i,o as a,t as r,v as t,w as R,x as ir}from"../chunks/Cau8z7w8.js";import{s}from"../chunks/Cv_SUIVi.js";import{i as dt,s as nr,a as vr}from"../chunks/Df8EspDC.js";import{w as dr,$ as lr,e as lt,i as It,s as cr}from"../chunks/D2-4r9CG.js";import{s as Mt,c as Rt}from"../chunks/C_yyQNa1.js";import{o as _r}from"../chunks/B9GAXeb5.js";var ur=A('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300"><div class="animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-blue-600 mb-6"></div> <p class="text-xl font-semibold tracking-wide"> </p></section>'),pr=A('<tr><td class="p-2"> </td><td class="p-2 flex items-center gap-2"> <strong> </strong></td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td><td class="p-2"> </td></tr>'),mr=A('<td class="p-2"> </td> <td class="p-2"> </td> <td class="p-2"> </td>',1),fr=A("<tr><!></tr>"),br=A('<div class="p-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="flex items-center gap-2 mb-2"><p><strong> </strong> </p></div> <p class="mb-1"><strong> </strong> </p> <img alt="Tire" class="w-16 h-16 mb-2"> <p class="mb-1"><strong> </strong> </p></div>'),gr=A('<div class="border-2 border-gray-300 dark:border-gray-700 rounded-xl p-4 m-4 font-sans bg-white dark:bg-gray-900 text-black dark:text-white transition-colors"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold">F1 Live Tracker</h1></div> <h2 class="text-xl font-semibold mb-3"> </h2> <div class="overflow-x-auto"><table class="w-full text-sm border border-gray-300 dark:border-gray-700 rounded"><thead class="bg-gray-100 dark:bg-gray-800"><tr><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left">Total</th></tr></thead><tbody></tbody></table></div> <h2 class="text-xl font-semibold mt-8 mb-3"> </h2> <div class="overflow-x-auto"><table class="w-full text-sm border border-gray-300 dark:border-gray-700 rounded"><thead class="bg-gray-100 dark:bg-gray-800"><tr><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th><th class="p-2 text-left"> </th></tr></thead><tbody></tbody></table></div> <h2 class="text-xl font-semibold mt-8 mb-3"> </h2> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div></div>'),hr=A('<section class="flex flex-col items-center justify-center min-h-[60vh] text-gray-700 dark:text-gray-300 text-center"><p class="text-2xl font-bold"> </p></section>');function Lr(Bt,Pt){sr(Pt,!0);const[Ct,Et]=nr(),l=()=>vr(lr,"$t",Ct);let ct=b(q([])),_t=b(q([])),ut=b(q([])),H=b(q([])),pt=b(!0),z=b(!1),mt=b(!1),ft=b(q([])),bt=b(null),gt=b(null);function Ft(){const o=new Map;return[...i(ut)].filter(e=>e.lap_duration).forEach(e=>{(!o.has(e.driver_number)||e.lap_number>o.get(e.driver_number).lap_number)&&o.set(e.driver_number,e)}),Array.from(o.values()).sort((e,d)=>B(e.driver_number)-B(d.driver_number))}async function Nt(){const n=await(await fetch("https://api.openf1.org/v1/sessions?session_key=latest")).json();if(n.length===0)return!1;const e=n[0],d=new Date,g=new Date(e.date_start);return u(z,g<=d),i(z)}async function ht(){const[o,n,e,d,g]=await Promise.all([fetch("https://api.openf1.org/v1/drivers?session_key=latest"),fetch("https://api.openf1.org/v1/stints?session_key=latest"),fetch("https://api.openf1.org/v1/laps?session_key=latest"),fetch("https://api.openf1.org/v1/pit?session_key=latest"),fetch("https://api.openf1.org/v1/position?session_key=latest")]);u(ct,await o.json(),!0),u(_t,await n.json(),!0),u(ut,await e.json(),!0),u(H,await d.json(),!0),u(ft,await g.json(),!0),u(gt,Ft(),!0),u(bt,qt(),!0)}function J(o){var n;return((n=i(ct).find(e=>e.driver_number===o))==null?void 0:n.name_acronym)||""}function B(o){const n=i(ft).filter(e=>e.driver_number===o);return n.length===0?"-":n.reduce((e,d)=>d.session_time>e.session_time?d:e).position}function qt(){const o=new Map;for(const e of i(_t)){const d=o.get(e.driver_number);(!d||e.lap_start>d.lap_start)&&o.set(e.driver_number,e)}return Array.from(o.values()).sort((e,d)=>{const g=parseInt(B(e.driver_number))||99,L=parseInt(B(d.driver_number))||99;return g-L})}function P(o){if(!o||isNaN(o))return"-";const n=Math.floor(o/60),e=(o%60).toFixed(3).padStart(6,"0");return n>0?`${n}:${e}`:e}_r(async()=>{await dr();const o=await Nt();if(u(z,o,!0),o){await ht(),u(pt,!1);const n=setInterval(ht,1e4),e=window.matchMedia("(prefers-color-scheme: dark)");return u(mt,e.matches,!0),e.addEventListener("change",d=>u(mt,d.matches,!0)),()=>clearInterval(n)}});var xt=At(),zt=vt(xt);{var Gt=o=>{var n=ur(),e=a(r(n),2),d=r(e,!0);t(e),t(n),R(g=>s(d,g),[()=>l()("loading")]),D(o,n)},Ht=o=>{var n=At(),e=vt(n);{var d=L=>{var j=gr(),I=a(r(j),2),K=r(I,!0);t(I);var C=a(I,2),yt=r(C),O=r(yt),wt=r(O),Q=r(wt),Jt=r(Q,!0);t(Q);var U=a(Q),Kt=r(U,!0);t(U);var V=a(U),Ot=r(V,!0);t(V);var W=a(V),Qt=r(W);t(W);var X=a(W),Ut=r(X);t(X);var kt=a(X),Vt=r(kt);t(kt),ir(),t(wt),t(O);var $t=a(O);lt($t,21,()=>i(gt).slice(-30),It,(h,v,x)=>{var c=pr();Mt(c,1,Rt(x%2===0?"bg-gray-50 dark:bg-gray-800":""));var f=r(c),y=r(f,!0);t(f);var p=a(f),w=r(p),_=a(w),k=r(_,!0);t(_),t(p);var m=a(p),T=r(m,!0);t(m);var $=a(m),M=r($,!0);t($);var S=a($),E=r(S,!0);t(S);var F=a(S),N=r(F,!0);t(F);var G=a(F),st=r(G,!0);t(G),t(c),R((ot,it,nt,rr,er,ar)=>{s(y,ot),s(w,`${i(v).driver_number??""} - `),s(k,it),s(T,i(v).lap_number),s(M,nt),s(E,rr),s(N,er),s(st,ar)},[()=>B(i(v).driver_number),()=>J(i(v).driver_number),()=>P(i(v).duration_sector_1),()=>P(i(v).duration_sector_2),()=>P(i(v).duration_sector_3),()=>P(i(v).lap_duration)]),D(h,c)}),t($t),t(yt),t(C);var Y=a(C,2),Wt=r(Y,!0);t(Y);var Z=a(Y,2),St=r(Z),tt=r(St),Dt=r(tt),rt=r(Dt),Xt=r(rt,!0);t(rt);var et=a(rt),Yt=r(et,!0);t(et);var Lt=a(et),Zt=r(Lt,!0);t(Lt),t(Dt),t(tt);var jt=a(tt);lt(jt,21,()=>i(H),It,(h,v,x)=>{var c=fr();Mt(c,1,Rt(x%2===0?"bg-gray-50 dark:bg-gray-800":""));var f=r(c);{var y=p=>{var w=mr(),_=vt(w),k=r(_);t(_);var m=a(_,2),T=r(m,!0);t(m);var $=a(m,2),M=r($,!0);t($),R((S,E)=>{s(k,`${i(v).driver_number??""} (${S??""})`),s(T,i(v).lap_number),s(M,E)},[()=>J(i(v).driver_number),()=>P(i(v).pit_duration)]),D(p,w)};dt(f,p=>{i(v).lap_number!==1&&p(y)})}t(c),D(h,c)}),t(jt),t(St),t(Z);var at=a(Z,2),tr=r(at,!0);t(at);var Tt=a(at,2);lt(Tt,21,()=>i(bt),h=>h.driver_number,(h,v)=>{var x=br(),c=r(x),f=r(c),y=r(f),p=r(y);t(y);var w=a(y);t(f),t(c);var _=a(c,2),k=r(_),m=r(k);t(k);var T=a(k);t(_);var $=a(_,2),M=a($,2),S=r(M),E=r(S);t(S);var F=a(S);t(M),t(x),R((N,G,st,ot,it,nt)=>{s(p,`${N??""}:`),s(w,` ${i(v).driver_number??""} (${G??""})`),s(m,`${st??""}:`),s(T,` ${i(v).compound??""}`),cr($,"src",ot),s(E,`${it??""}:`),s(F,` ${nt??""}`)},[()=>l()("driver"),()=>J(i(v).driver_number),()=>l()("currentTire"),()=>`/tyres/${i(v).compound.toLowerCase()}.svg`,()=>l()("pitStops"),()=>i(H).filter(N=>N.driver_number===i(v).driver_number).length]),D(h,x)}),t(Tt),t(j),R((h,v,x,c,f,y,p,w,_,k,m,T)=>{s(K,h),s(Jt,v),s(Kt,x),s(Ot,c),s(Qt,`${f??""} 1`),s(Ut,`${y??""} 2`),s(Vt,`${p??""} 3`),s(Wt,w),s(Xt,_),s(Yt,k),s(Zt,m),s(tr,T)},[()=>l()("lapTimes"),()=>l()("position"),()=>l()("driver"),()=>l()("lap"),()=>l()("sector"),()=>l()("sector"),()=>l()("sector"),()=>l()("pitStopDuration"),()=>l()("driver"),()=>l()("lap"),()=>l()("pitStopDuration"),()=>l()("driverInfo")]),D(L,j)},g=L=>{var j=hr(),I=r(j),K=r(I,!0);t(I),t(j),R(C=>s(K,C),[()=>l()("noSession")]),D(L,j)};dt(e,L=>{i(z)?L(d):L(g,!1)})}D(o,n)};dt(zt,o=>{i(pt)?o(Gt):o(Ht,!1)})}D(Bt,xt),or(),Et()}export{Lr as component};
